<!DOCTYPE html>
<html>
<head>
	<title>Chessmaestro 5000</title>
	<link rel="stylesheet" type="text/css" href="css/main.css">
	<link rel="stylesheet" type="text/css" href="css/chessboard-0.3.0.min.css">
</head>
<body>
	<div id="board"></div>
	<button onClick="moveRandomPiece()">Make a random move</button>
	<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
	<script src="node_modules/chess.js/chess.min.js"></script>
	<script src="js/chessboard-0.3.0.min.js"></script>
	<script>
	(function() {
		var game = new Chess(),
			boardOptions = {
				"draggable": true,
				"position": "start",
				"onDrop": reactToMove
			}
			board = ChessBoard("board", boardOptions);

		function moveRandomPiece() {
			var moves = game.moves();
			var move = moves[Math.floor(Math.random() * moves.length)];
			game.move(move);

			// Make a list of all the moves
			// Get the current board position
			// Assign a score to the current board position, reset the board "high score"
			// Try out the first move
			// Compare the move to the "high score" -- if greater, assign move as "best move," otherwise do nothing
			// Cycle through list of moves
			// Once all moves have been cycled through, perform the best move

			board.position(game.fen());

			if (game.in_checkmate() === true) {
				alert("Checkmate! You lose!");
			}
		}

		function reactToMove(source, target) {
			var move = game.move({
				"from": source,
				"to": target,
				"promotion": "q"
			});

			if (move === null) {
				return "snapback";
			}
			if (game.in_checkmate() === true) {
				alert("Checkmate! You win!");
				return;
			}

			window.setTimeout(moveRandomPiece, 250);
		}
	}());
	</script>
</body>
</html>